{% extends "base.html" %}
{% load static %}

{% block main %}

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

<style>
/* Global Styles */
body {
    font-family: 'Arial', sans-serif;
    margin: 0;
    padding: 0;
    background: #eef1f5;
}

/* Centering the Container */
.container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-top: 40px;
    margin-bottom: 40px;
}

/* Payment Box Styling */
.payment-container {
    background: linear-gradient(to bottom, #ffffff, #fafafa);
    padding: 35px;
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
    width: 420px;
    text-align: center;
    transition: all 0.3s ease-in-out;
    border-top: 6px solid #d35400;
    position: relative;
    overflow: hidden;
}

.payment-container:hover {
    transform: scale(1.03);
}

/* Branding Inside Form */
.brand-header {
    color: #d35400;
    font-size: 22px;
    font-weight: bold;
    margin-bottom: 15px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.brand-header i {
    font-size: 26px;
}

/* Typography */
h1 {
    font-size: 24px;
    color: #222;
    margin-bottom: 15px;
}

/* Product Details */
.product-summary {
    margin-bottom: 20px;
    padding: 12px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.05);
}

.product-detail {
    display: flex;
    justify-content: space-between;
    padding: 12px 0;
    border-bottom: 1px solid #ddd;
    align-items: center;
}

.product-detail:last-child {
    border-bottom: none;
}

.product-detail span {
    font-size: 16px;
    font-weight: 500;
    color: #444;
}

/* Bootstrap Icons */
.product-detail i {
    color: #d35400;
    font-size: 18px;
    margin-right: 5px;
}

/* Payment Button */
.pay-button {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 14px;
    font-size: 16px;
    font-weight: bold;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    width: 100%;
    box-shadow: 0px 5px 12px rgba(0, 0, 0, 0.2);
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
}

.pay-button:hover {
    background-color: #218838;
    transform: translateY(-2px);
}

.pay-button i {
    font-size: 20px;
}

/* Footer */
.footer {
    background-color: #333;
    color: white;
    padding: 20px 0;
    text-align: center;
    margin-top: 20px;
}

.footer a {
    color: #fff;
    text-decoration: none;
}

.footer a:hover {
    color: #ddd;
}

</style>

<div class="container">
    <div class="payment-container">
        <div class="brand-header">
            <i class="bi bi-shop"></i> Subhadra Printers
        </div>

        <h1><i class="bi bi-lock-fill"></i> Secure Checkout</h1>

        <div class="product-summary">
            <div class="product-detail">
                <span><i class="bi bi-cash-stack"></i> Product Price:</span>
                <span>â‚¹{{total}}</span>
            </div>
            <div class="product-detail">
                <span><i class="bi bi-basket-fill"></i> Items:</span>
                <span>{{items}}</span>
            </div>
        </div>

        <button id="rzp-button1" class="pay-button">
            <i class="bi bi-credit-card-fill"></i> Proceed to Payment
        </button>

        <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
        <script>
        var options = {
            "key": "rzp_test_VOUmU42gOTrAa2",
            "amount": "{payment.amount}",
            "currency": "INR",
            "name": "Subhadra Printers",
            "description": "Test Transaction",
            "image": "https://example.com/your_logo",
            "order_id": "{{payment.id}}",
            "handler": function (response){
                window.location.href="http://127.0.0.1:8000/email_send"
            },
            "prefill": {
                "name": "{{request.user.username}}",
                "email": "{{request.user.email}}",
                "contact": "9000090000"
            },
            "notes": {
                "address": "Razorpay Corporate Office"
            },
            "theme": {
                "color": "#3399cc"
            }
        };
        var rzp1 = new Razorpay(options);
        rzp1.on('payment.failed', function (response){
            alert(response.error.code);
            alert(response.error.description);
        });
        document.getElementById('rzp-button1').onclick = function(e){
            rzp1.open();
            e.preventDefault();
        }
        </script>
    </div>
</div>

{% endblock main %}
